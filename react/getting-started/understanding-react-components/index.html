<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta
      name='viewport'
      content='width=device-width, initial-scale=1, maximum-scale=1, minimal-ui' />
    <meta
      name='description'
      content=SurviveJS />
    <meta
      name='keywords'
      content= />
    <title>SurviveJS</title>
    
    <link rel='icon' type='image/png' href='/assets/favicon.png'></link>

    
      <link href="/site.17316cb466d661c9c3c0.css" rel="stylesheet">
    
  </head>
  <body>
    <div><div class="chapter__wrapper"><div class="header-image" style="background-image:url(/182f70dd0225f637ed6b56c8fb25a2de.jpg);"></div><h1 class="post__heading">Comprendiendo los Componentes de React</h1><div class="header-extra"><a href="https://pixabay.com/en/rusty-metal-old-machine-185531/">werner22brigitte (Public Domain)</a></div><div class="toc-nav__wrapper"><h4 class="search-nav--header">Search</h4><input id="search"/><h4 class="toc-nav--header">Índice</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/react/introduction/">Introducción</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/getting-started/">Comenzando</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/introduction-to-react/">Introducción a React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/setting-up-the-project/">Configurando el Proyecto</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/implementing-notes/">Implementando una Aplicación de Notas</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/deleting-notes/">Borrado de Notas</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Comprendiendo los Componentes de React</span></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/editing-notes/">Edición de Notas</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/styling-notes/">Dando Estilo a la Aplicación de Notas</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/implementing-kanban/">Implementando Kanban</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/react-and-flux/">React y Flux</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/implementing-store-and-actions/">Implementando NoteStore y NoteActions</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/implementing-persistency/">Implementando Persistencia en localStorage</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/handling-data-dependencies/">Gestionado Dependencias de Datos</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/editing-lanes/">Editando los Carriles</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/drag-and-drop/">Implementado Arrastrar y Soltar</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/advanced-techniques/">Técnicas Avanzadas</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/testing-react/">Probando React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/typing-with-react/">Tipado con React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/styling-react/">Aplicando Estilo a React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/structuring-react-projects/">Estructurando Proyectos con React</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/appendices/">Apéndices</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/appendices/language-features/">Características del Lenguaje</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/appendices/understanding-decorators/">Entendiendo los Decoradores</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/appendices/troubleshooting/">Resolución de Problemas</a></li></ul></div><div class="chapter"><div class="post__content"><div class="chapter-content"><p>Hasta donde hemos visto, los componentes de React son muy sencillos: Tienen un <code>estado</code> interno y aceptan propiedades (<code>props</code>). Aparte de esto, React facilita puntos de enganche que te permitirán hacer cosas más avanzadas, entre las que que se incluyen los métodos que gestionan el ciclo de vida y las referencias (<code>refs</code>). También existe una serie de propiedades y de métodos de los que te conviene ser consciente.</p>
<h2 class="header"><a class="header-anchor" href="#m-todos-del-ciclo-de-vida" id="m-todos-del-ciclo-de-vida"></a><span class="text">Métodos del Ciclo de Vida</span><a class="header-anchor-select" href="#m-todos-del-ciclo-de-vida">#</a></h2>
<p><img src="/bfc107cdab26bd032d2e0d842df9ea5e.png" alt="Métodos del ciclo de vida" class="" width="" height="" /></p>
<p>En la imagen superior puedes ver que cada componente de React tiene tres fases durante su ciclo de vida. Puede estar <strong>montándose</strong>, <strong>montado</strong> o <strong>desmontado</strong>. Cada una de esas tres fases tiene una serie de métodos relacionados.</p>
<p>Durante la fase de montaje puedes acceder a los siguientes:</p>
<ul>
<li><code>componentWillMount()</code> se ejecutará una vez antes de renderizar nada. Una forma de utilizarlo puede ser cargar datos de forma asíncrona y forzar un renderizado a través de <code>setState</code>. <code>render()</code> verá que el estado ha sido actualizado y se ejecutará. La ejecución tendrá lugar durante el renderizado en el servidor.</li>
<li><code>componentDidMount()</code> se ejecutará tras el renderizado inicial. Es en este punto donde puedes acceder al DOM. Puedes usar este método, por ejemplo, para utilizar jQuery en un componente. Esta ejecución <strong>no tendrá lugar</strong> cuando se está renderizando en el servidor.</li>
</ul>
<p>Una vez que un componente ha sido montado y está en funcionamiento puedes manipularlo con los siguientes métodos:</p>
<ul>
<li><code>componentWillReceiveProps(object nextProps)</code> se ejecuta cuando el componente recibe propiedades nuevas. Puedes usarlo, por ejemplo, para modificar el estado de tu componente según estas propiedades que has recibido.</li>
<li><code>shouldComponentUpdate(object nextProps, object nextState)</code> te permite optimizar el renderizado, ya que devuelve <code>false</code> si detecta que no hay ningún cambio que aplicar tras comprobar las propiedades y el estado. Es aquí donde <a href="https://facebook.github.io/immutable-js/">Immutable.js</a> y otras librerías similares te serán muy útiles a la hora de comprobar equidades. <a href="https://facebook.github.io/react/docs/optimizing-performance.html#shouldcomponentupdate-in-action">La documentación oficial</a> entra en más detalles.</li>
<li><code>componentWillUpdate(object nextProps, object nextState)</code> se ejecuta tras <code>shouldComponentUpdate</code> y antes de <code>render()</code>. No es posible utilizar <code>setState</code> aquí pero puedes, por ejemplo, cambiar propiedades de los estilos.</li>
<li><code>componentDidUpdate(object nextProps, object nextState)</code> se ejecuta tras el renderizado. En este punto puedes modificar el DOM. Puede ser útil para hacer que otro código funcione con React.</li>
</ul>
<p>Para terminar, hay una enganche más que puedes utilizar cuando un componente está desmontándose:</p>
<ul>
<li><code>componentWillUnmount()</code> se ejecuta justo antes de que un componente se desconecte del DOM. Es el lugar perfecto para limpiar recursos (por ejemplo, borrar temporizadores, elementos DOM personalizados, y cosas así).</li>
</ul>
<p>A menudo <code>componentDidMount</code> y <code>componentWillUnmount</code> van emparejados. Si configuras algo relacionado con el DOM o creas un listener en <code>componentDidMount</code> tendrás que recordar quitarlo con <code>componentWillUnmount</code>.</p>
<h2 class="header"><a class="header-anchor" href="#refs" id="refs"></a><span class="text">Refs</span><a class="header-anchor-select" href="#refs">#</a></h2>
<p>Los <a href="https://facebook.github.io/react/docs/more-about-refs.html">refs</a> de React te permiten acceder al DOM que hay por debajo fácilmente. Al utilizarlos podrás enlazar tu código a la página web.</p>
<p>Las referencias necesitan una instancia que les dé soporte, lo que significa que sólo funcionan con <code>React.createClass</code> o con definiciones de clases basadas en componentes. La idea principal es la siguiente:</p>
<pre><code class="lang-javascript"><span class="token operator" >&lt;</span>input type<span class="token operator" >=</span><span class="token string" >"text"</span> ref<span class="token operator" >=</span><span class="token string" >"input"</span> <span class="token operator" >/</span><span class="token operator" >></span>

<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>

<span class="token comment" spellcheck="true">// Accede en cualquier lugar</span>
<span class="token keyword" >this</span><span class="token punctuation" >.</span>refs<span class="token punctuation" >.</span>input
</code></pre>
<p>Aparte de a cadenas de texto, las referencias permiten que realices una llamada una vez que el componente sea montado. Puedes inicializar algo en este punto o capturar la referencia:</p>
<pre><code class="lang-javascript"><span class="token operator" >&lt;</span>input type<span class="token operator" >=</span><span class="token string" >"text"</span> ref<span class="token operator" >=</span><span class="token punctuation" >{</span>element <span class="token operator" >=</span><span class="token operator" >></span> element<span class="token punctuation" >.</span><span class="token function" >focus</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
</code></pre>
<h2 class="header"><a class="header-anchor" href="#propiedades-y-m-todos-propios" id="propiedades-y-m-todos-propios"></a><span class="text">Propiedades y Métodos Propios</span><a class="header-anchor-select" href="#propiedades-y-m-todos-propios">#</a></h2>
<p>Más allá del ciclo de vida y de las referencias hay una gran cantidad de <a href="https://facebook.github.io/react/docs/component-specs.html">propiedades y métodos</a> de los cuales deberías ser consciente, especialmente si vas a utilizar <code>React.createClass</code>:</p>
<ul>
<li><code>displayName</code> - Es preferible establecer un <code>displayName</code> ya que nos permitirá depurar mejor. Para las clases de ES6 este valor se genera automáticamente a partir del nombre de la clase. Puedes ponerle también un <code>displayName</code> a un componente basado en una función anónima.</li>
<li><code>getInitialState()</code> - Se puede conseguir lo mismo con clases utilizando el <code>constructor</code>.</li>
<li><code>getDefaultProps()</code> - En clases las estableces dentro del <code>constructor</code>.</li>
<li><code>render()</code> - Es la piedra angular de React. Debe <a href="https://facebook.github.io/react/tips/maximum-number-of-jsx-root-nodes.html">devolver un único nodo</a> ya que si devuelves varios no funcionará.</li>
<li><code>mixins</code> - <code>mixins</code> contiene un array de mixins que aplicar a los componentes.</li>
<li><code>statics</code> - <code>statics</code> contiene propiedades estáticas y métodos para un componente. Con ES6 puedes asignárselos a la clase del siguiente modo:</li>
</ul>
<pre><code class="lang-javascript"><span class="token keyword" >class</span> <span class="token class-name" >Note</span> <span class="token punctuation" >{</span>
  <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
Note<span class="token punctuation" >.</span>willTransitionTo <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >}</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> Note<span class="token punctuation" >;</span>
</code></pre>
<p>También puedes escribirlo así:</p>
<pre><code class="lang-javascript"><span class="token keyword" >class</span> <span class="token class-name" >Note</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >static</span> <span class="token function" >willTransitionTo</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >}</span>
  <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> Note<span class="token punctuation" >;</span>
</code></pre>
<p>Algunas librerías, como React DnD, se apoyan en métodos estáticos para facilitar enganches de transición. Esto te permite controlar qué ocurre cuando un componente se muestra o se oculta. Por definición todo lo estático se encuentra disponible en la propia clase.</p>
<p>Los componentes de React te permiten documentar la interfaz de tu componente utilizando <code>propTypes</code> de este modo:</p>
<pre><code class="lang-javascript"><span class="token keyword" >const</span> Note <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>task<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token operator" >&lt;</span>div<span class="token operator" >></span><span class="token punctuation" >{</span>task<span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span><span class="token punctuation" >;</span>
Note<span class="token punctuation" >.</span>propTypes <span class="token operator" >=</span> <span class="token punctuation" >{</span>
  task<span class="token punctuation" >:</span> React<span class="token punctuation" >.</span>PropTypes<span class="token punctuation" >.</span>string<span class="token punctuation" >.</span>isRequired
<span class="token punctuation" >}</span>
</code></pre>
<p>Lee el capítulo <em>Tipado con React</em> Para saber más sobre <code>propTypes</code>.</p>
<h2 class="header"><a class="header-anchor" href="#convenciones-de-los-componentes-de-react" id="convenciones-de-los-componentes-de-react"></a><span class="text">Convenciones de los Componentes de React</span><a class="header-anchor-select" href="#convenciones-de-los-componentes-de-react">#</a></h2>
<p>Prefiero tener el contructor primero, seguido de los métodos del ciclo de vida, <code>render()</code> y, finalmente, los métodos usados por <code>render()</code>. Esta aproximación de arriba a abajo me hace más sencillo leer el código. Hay una convención opuesta que deja <code>render</code> como último método. Las convenciones con respecto a los nombres también varían. Tendrás que encontrar aquellas convenciones que te hagan sentir más cómodo.</p>
<p>Puedes obligarte a utilizar una convención utilizando un linter (un analizador de código) como <a href="http://eslint.org/">ESLint</a>. El uso de linters decrementa la cantidad fricción que puede aparecer al trabajar sobre el código de otros. Incluso en proyectos personales, el uso de herramientas que te permitan verificar la sintaxis y los estándares son muy útiles. No sólo reduce la cantidad y la gravedad de los errores sino que además te permite encontrarlos cuanto antes.</p>
<p>Si configuras un sistema de integración contínua podrás realizar pruebas contra muchas plataformas y detectar errores de regresión pronto. Esto es especialmente importante si estás utilizando rangos de versiones no muy definidos, ya que a veces la gestioń de dependencias pueden acarrear problemas y es bueno detectarlos.</p>
<h2 class="header"><a class="header-anchor" href="#conclusi-n" id="conclusi-n"></a><span class="text">Conclusión</span><a class="header-anchor-select" href="#conclusi-n">#</a></h2>
<p>No sólo la definición de componentes de React es muy sencilla, sino que además es pragmática. Las partes más avanzadas pueden llevar tiempo hasta que se llegan a dominar, pero es bueno saber que están allí.</p>
<p>En el próximo capítulo continuaremos con la implementación que permitirá a los usuarios editar sus notas individualmente.</p>
</div><div class="social-links"><blockquote class="tip">If you enjoyed this page, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><h2 class="subscribe-header">Subscribe to the mailing list</h2><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate social-form" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group social-input-container"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email" id="mce-EMAIL"/></div><div style="display:none;position:absolute;left:-5000px;"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="social-subscribe-container"><input type="submit" class="btn button social-subscribe" style="margin-top:1em;margin-bottom:1em;line-height:2em;" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><div class="new-prevnext"><div class="new-prevnext__prev"><div class="new-prevnext__bg" style="background-image:url(/cfd271c2b40fc892b333884df3929301.jpg);"></div><span class="new-prevnext__info">Capítulo anterior</span><a class="new-prevnext__link" href="/react/getting-started/deleting-notes/">Borrado de Notas</a></div><div class="new-prevnext__next"><div class="new-prevnext__bg" style="background-image:url(/4ac60ef0be629bc207d2919d314499b3.jpg);"></div><span class="new-prevnext__info">Pŕoximo capítulo</span><a class="new-prevnext__link" href="/react/getting-started/editing-notes/">Edición de Notas</a></div></div><blockquote class="tip"><p>Puedes encontrar este libro en <a href="https://leanpub.com/survivejs-react">Leanpub</a>. Comprando este libro permitirás el desarrollo de más contenido.</p></blockquote><div id="disqus_thread"></div></div></div><div><a class="next-page" title="Edición de Notas" href="/react/getting-started/editing-notes/"><i class="icon-right-open"></i></a><a class="previous-page" title="Borrado de Notas" href="/react/getting-started/deleting-notes/"><i class="icon-left-open"></i></a></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a href="/">Home</a></div><div class="nav__link"><a href="/blog/">Leer el blog</a></div><div class="nav__link"><a href="/training/">Formación</a></div><div class="nav__link"><a href="https://leanpub.com/survivejs-react">Compra el ebook</a></div><div class="nav__link"><a href="/"></a></div><div class="nav__link"><a href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><a href="https://github.com/survivejs/site" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" style="position:absolute;top:0;fill:#000;right:0;"><path class="octo-banner" d="M0 0l115 115h15l12 27 108 108V0z" fill="#fff"></path><path class="octo-arm" d="M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16" style="-webkit-transform-origin:130px 106px;transform-origin:130px 106px;"></path><path class="octo-body" d="M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z"></path></svg></a><footer><div class="footer-wrapper"><div class="footer-content-wrapper"><div class="footer-social"><h3>Social</h3><ul><li><a href="https://twitter.com/survivejs" target="_blank" rel="noopener noreferrer">@survivejs</a></li><li><a href="http://eepurl.com/bth1v5" target="_blank" rel="noopener noreferrer">Mailing List</a></li><li><a href="https://gitter.im/survivejs" target="_blank" rel="noopener noreferrer">Gitter Chat</a></li><li><a href="https://github.com/survivejs" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a href="https://presentations.survivejs.com" target="_blank" rel="noopener noreferrer">Presentations</a></li><li><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank" rel="noopener noreferrer">Contact</a></li><li><a href="https://github.com/survivejs/ama/issues" target="_blank" rel="noopener noreferrer">Ask Me Anything</a></li></ul></div></div></div></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
          ((window.gitter = {}).chat = {}).options = {
            showChatByDefault: false,
            activationElement: '.gitter-open-chat-button',
            room: 'survivejs/react'
          };
        </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div></div>

    
  </body>
</html>
